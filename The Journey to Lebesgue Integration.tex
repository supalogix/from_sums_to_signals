\documentclass{book}
\usepackage{amssymb, amsmath}
\usepackage{amsthm}
\usepackage[T1]{fontenc}  % Proper encoding for text
\usepackage[utf8]{inputenc} % Handles UTF-8 encoding (for most special characters)
\usepackage{lmodern} % Modern font to avoid encoding issues
\usepackage{parskip} % Removes indentation and adds space between paragraphs
\usepackage{amsmath}
\usepackage{tikz}
\usetikzlibrary{matrix,arrows}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}  % Ensures compatibility with the latest PGFPlots version
\usepackage{booktabs}
\usepackage{array}
\usepackage{titlesec}
\usepackage{makecell}
\usetikzlibrary{positioning}
\usepackage{dot2texi} % Enable Graphviz inside LaTeX
\usetikzlibrary{shapes,arrows}
\usepackage{fancyhdr}
\pagestyle{fancy}  % Set page style to fancy
\fancyhf{}         % Clear default header/footer
\usetikzlibrary{trees, arrows.meta, matrix, decorations.pathreplacing}
\usetikzlibrary{trees, arrows.meta}
\usetikzlibrary{positioning, shapes.callouts}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float}
\usepackage{bussproofs}
\usepackage{lmodern}
\usepackage{geometry}
\usepackage{xcolor}
\usepackage[most]{tcolorbox}
\usepackage{tikzpeople}
\usepackage{ifthen} % Required for \ifthenelse
\usetikzlibrary{calc, arrows.meta, positioning}
\usetikzlibrary{matrix}
\usepackage{setspace}
\usepackage{tikz-cd}
\usetikzlibrary{fit, positioning, shapes}
\usepackage{import}
\usepackage{pgfgantt}
\usepackage{tabularx}  % Add this to your preamble
\usepackage[most]{tcolorbox} % add to your preamble
\tcbuselibrary{listings}

\usepackage{pifont}

%\usepackage{chngcntr}
%\counterwithin*{chapter}{part}




\usepackage{polyglossia}
\setmainlanguage{english}
\setotherlanguage{greek}
\newfontfamily\greekfont{Times New Roman} % or any font that supports Greek








\usepackage{listings}
\usepackage{color}
\usepackage{caption}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[utf8]{inputenc}
\usepackage{caption}






\usepackage{etoolbox} % Needed for patching commands

% Insert new page before \section
\pretocmd{\section}{\clearpage}{}{}

% Insert new page before \subsection
\pretocmd{\subsection}{\clearpage}{}{}


\usepackage{etoolbox}
\usepackage{xcolor}
\usepackage{lipsum} % Optional, for testing
\usepackage{graphicx}



% Define a horizontal rule that's 80% of the linewidth
%\newcommand{\figureseparator}{
 % \par\vspace{0.5em}
 % \noindent\makebox[\linewidth]{\rule{0.8\linewidth}{0.4pt}}%
 % \par\vspace{0.5em}
%}


\usepackage{needspace}

\newcommand{\figureseparator}{
  \needspace{3\baselineskip} % Reserve space to prevent page break
  \par\vspace{0.5em}
  \noindent\makebox[\linewidth]{\rule{0.8\linewidth}{0.4pt}}%
  \par
  \vspace{0.5em}
}

% Automatically add separators before and after every figure
%\AtBeginEnvironment{figure}{\figureseparator}
%\AtEndEnvironment{figure}{\figureseparator}












\usepackage[most]{tcolorbox}
\tcbuselibrary{skins, breakable}

% Define a custom figure box style
\tcolorboxenvironment{figure}{
  boxrule=0.4pt,
  colframe=black!40,
  colback=white,
  sharp corners=south,
  drop shadow southeast,
  enhanced,
  breakable,
  before skip=10pt,
  after skip=10pt,
  width=\linewidth
}


\newtcolorbox{calloutfigure}[1][]{%
  breakable,
  colback=blue!5,
  colframe=blue!40,
  title=#1,
  fonttitle=\bfseries,
  sharp corners=south,
  enhanced,
  drop shadow southeast,
  before skip=10pt,
  after skip=10pt,
}



\tcbset{
  sidebarstyle/.style={
    colback=gray!10!white,
    colframe=black,
    fonttitle=\bfseries,
    title={Historical Sidebar},
    boxrule=0.5pt,
    arc=2mm,
    left=1em,
    right=1em,
    top=0.5em,
    bottom=0.5em,
    enhanced,
    sharp corners=south,
    before skip=1em,
    after skip=1em
  }
}








\newcommand{\comicpanel}[6]{
  % === PARAMETER EXPLANATION ===
  % #1: x-shift — Horizontal panel position
  % #2: y-shift — Vertical panel position
  % #3: left character label (always shown below left stick figure)
  % #4: right character label (always shown below right stick figure)
  % #5: callout text
  % #6: callout pointer (relative to callout box)

  % === PANEL BOX ===
  \draw[thick] (#1,#2) rectangle ++(6,4);

  % === LEFT STICK FIGURE ===
  \begin{scope}[shift={(#1+1.2,#2+1.0)}]
    \draw (0,1) circle (0.2);
    \draw (0,0.8) -- (0,0);
    \draw (0,0.6) -- (-0.3,0.3);
    \draw (0,0.6) -- (0.3,0.3);
    \draw (0,0) -- (-0.2,-0.5);
    \draw (0,0) -- (0.2,-0.5);
    \node[below=2pt] at (0,-0.5) {\scriptsize \textbf{#3}};
  \end{scope}

  % === RIGHT STICK FIGURE ===
  \begin{scope}[shift={(#1+4.7,#2+1.0)}]
    \draw (0,1) circle (0.2);
    \draw (0,0.8) -- (0,0);
    \draw (0,0.6) -- (-0.3,0.3);
    \draw (0,0.6) -- (0.3,0.3);
    \draw (0,0) -- (-0.2,-0.5);
    \draw (0,0) -- (0.2,-0.5);
    \node[below=2pt] at (0,-0.5) {\scriptsize \textbf{#4}};
  \end{scope}

  % === SPEECH BUBBLE ===
  \node[draw, rectangle callout, rounded corners=2pt,
        callout relative pointer={#6},
        text width=4.5cm, align=left] 
        at (#1+3,#2+3.2) {#5};
}



\usepackage[most]{tcolorbox}

\tcbset{
  examplebox/.style={
    colback=gray!5!white,
    colframe=gray!75!black,
    fonttitle=\bfseries,
    coltitle=black,
    title=Example,
    sharp corners,
    boxrule=0.5pt,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    toptitle=1mm,
    bottomtitle=1mm,
  }
}

\newtcolorbox{example}[1][]{examplebox, #1}


\usepackage{setspace}  % for line spacing



% In your preamble
\usepackage{tikz}
\usepackage{setspace}
\usepackage{xcolor}

\renewenvironment{quote}
  {
    \par\vspace{0.25em}
    \noindent
    \begin{tikzpicture}[remember picture, overlay]
      % Giant left quote mark (top-left)
      \node[anchor=north west, font=\fontsize{60}{60}\selectfont\color{gray!40}]
        at ([xshift=-1em,yshift=1.5em]0,0) {``};
    \end{tikzpicture}

    \begin{list}{}{\leftmargin=3em \rightmargin=3em}
    \item\relax
    \color{black!70}
    \bfseries\itshape
    \begin{spacing}{1.3}
    \fontsize{12pt}{16pt}\selectfont % ← placed correctly here
  }
  {
    \end{spacing}
    \end{list}

    % Giant right quote mark (bottom-right)
    \begin{tikzpicture}[remember picture, overlay]
      \node[anchor=south east, font=\fontsize{60}{60}\selectfont\color{gray!40}]
        at ([xshift=1em,yshift=-1.2em]\textwidth,0) {''};
    \end{tikzpicture}
    \par\vspace{0.25em}
  }















\renewcommand{\headrulewidth}{0pt}
% Define copyright notice in the footer
\fancyhead[R]{\thepage} % Centered page number
\fancyfoot[L]{\small \textcopyright~2025 Jonathan Nacionales}
\fancyfoot[R]{\small jnaciona@gmail.com | 310.227.5510}



\titleformat{\section}
  {\normalfont\Large\bfseries}{\thesection}{1em}{}[{\titlerule[0.8pt]}]
\newcommand{\sectionbreak}{\clearpage}







\tikzset{
  dagnode/.style={
    draw,
    rounded corners,
    minimum height=0.8cm,
    minimum width=2.2cm,
    font=\scriptsize,
    text centered,
    fill=blue!5
  },
  arrow/.style={
    ->,
    thick
  }
}


\begin{document}
\onehalfspacing
\setlength{\parskip}{1.5em} 


\begin{titlepage}
  \centering

  {\LARGE\bfseries From Sums to Signals: A Mathematical Guide to Deep Learning \par}
  \vspace{1em}
  {\large Featuring a Special Appearance by High-Frequency Trading \par}
  \author{Jonathan Nacionales}
\date{\today}

  \vfill

 \begin{figure}[H]
\centering
\begin{tikzpicture}[every node/.style={font=\footnotesize}]

% Panel 1 — Engineer 1 with buzzwords
\comicpanel{0}{4}
  {Engineer 1}
  {Engineer 2}
  {We amplify latent embeddings with dynamic gradient fusion layers and recursive self-attention.}
  {(-0.6,-0.5)}

% Panel 2 — Engineer 2 simplifies
\comicpanel{6.5}{4}
  {Engineer 1}
  {Engineer 2}
  {So... you're summing weighted functions of inputs again?}
  {(.5,-0.5)}

% Panel 3 — Engineer 1 gets even worse
\comicpanel{0}{0}
  {Engineer 1}
  {Engineer 2}
  {With Fourier-regularized signal priors injected through a learnable hyperkernel manifold.}
  {(-0.7,-0.7)}

% Panel 4 — Engineer 2 drops the truth
\comicpanel{6.5}{0}
  {Engineer 1}
  {Engineer 2}
  {Talking like that is why execs hire consultants to explain things to them. Please stop.}
  {(0.7,-0.6)}

\end{tikzpicture}
\caption{Machine learning: just math with a hype wrapper.}
\end{figure}
\end{titlepage}

\frontmatter
\tableofcontents

\mainmatter % <--- This starts chapter numbering at 1

\newpage

%\part{Introduction}
%\subimport*{section/1_bridging_the_gap}{bridging_the_gap.tex}
%\part{Geometry and Algebra}
%\subimport*{section/2_pythagorous}{pythagorous.tex}
%\subimport*{section/3_plato}{plato.tex}
%\subimport*{section/4_aristotle}{aristotle.tex}
%\subimport*{section/5_eudoxus}{eudoxus.tex}
%\subimport*{section/6_euclid}{euclid.tex}
%\subimport*{section/7_archamedes}{archamedes.tex}
%\subimport*{section/8_potolemy}{potolemy.tex}
%\subimport*{section/9_plotinus}{plotinus.tex}
%\subimport*{section/10_augustine}{augustine.tex}
%\subimport*{section/11_aquinus}{aquinus.tex}
%\subimport*{section/12_al_battani}{al_battani.tex}
%\subimport*{section/13_copernicus}{copernicus.tex}
%\subimport*{section/14_galileo}{galileo.tex}
%\subimport*{section/15_kepler}{kepler.tex}
%\subimport*{section/16_cavalieri}{cavalieri.tex}
%\subimport*{section/17_wallis}{wallis.tex}
%\subimport*{section/18_barrow}{barrow.tex}
%\subimport*{section/19_newton}{newton.tex}
%\subimport*{section/20_leibniz}{leibniz.tex}
%\subimport*{section/21_euler}{euler.tex}
%\subimport*{section/22_lagrange}{lagrange.tex}
%\subimport*{section/23_laplace}{laplace.tex}
%\subimport*{section/24_hamilton}{hamilton.tex}
%\subimport*{section/25_riemann}{riemann.tex}
%\subimport*{section/26_heavyside}{heavyside.tex}
%\part{Analysis}
\subimport*{section/27_cauchy}{cauchy.tex}
%\subimport*{section/28_fourier}{fourier.tex}
%\subimport*{section/29_riemann}{riemann.tex}
%\subimport*{section/30_weierstrass}{weierstrass.tex}
%\subimport*{section/31_cantor}{cantor.tex}
%\subimport*{section/32_borel}{borel.tex}
%\subimport*{section/33_lebesgue}{lebesgue.tex}
%\part{Probability and Statistics}
%\subimport*{section/34_kolmogorov}{kolmogorov.tex}
%\subimport*{section/35_fisher}{fisher.tex}
%\subimport*{section/36_shannon}{shannon.tex}
%\subimport*{section/37_kullback_and_leibler}{kullback_and_leibler.tex}
%\subimport*{section/38_jeffries}{jeffries.tex}
%\subimport*{section/39_jordan}{jordan.tex}
%\subimport*{section/40_amari}{amari.tex}
%\part{Mathematical Foundations}
%\subimport*{section/41_godel}{godel.tex}
%\subimport*{section/42_mckay}{mckay.tex}
%\subimport*{section/43_hoeffding}{hoeffding.tex}
%\subimport*{section/44_wittgenstein}{wittgenstein.tex}
%\subimport*{section/45_chaitin}{chaitin.tex}
%\part{Computation}
%\subimport*{section/46_turing}{turing.tex}
%\subimport*{section/47_shannon}{shannon.tex}
%\subimport*{section/48_von_neumann}{von_neumann.tex}
%\subimport*{section/49_ulmann}{ulmann.tex}
%\subimport*{section/50_nash}{nash.tex}
%\subimport*{section/51_pontryagin}{pontryagin.tex}
%\subimport*{section/52_rossenblatt}{rossenblatt.tex}
%\subimport*{section/53_minskey}{minskey.tex}
%\subimport*{section/54_hinton}{hinton.tex}
%\subimport*{section/55_hopfield}{hopfield.tex}
%\subimport*{section/56_sejnowski}{sejnowski.tex}
%\subimport*{section/57_yann_lecun}{yann_lecun.tex}
%\subimport*{section/58_hinton}{hinton.tex}
%\subimport*{section/59_hochreiter}{hochreiter.tex}
%\subimport*{section/60_alexnet}{alexnet.tex}
%\subimport*{section/61_vaswani}{vaswani.tex}
%\subimport*{section/62_yann_lecun}{yann_lecun.tex}
%\subimport*{section/63_shwartz}{shwartz.tex}
%\input{in_progress/modern_age_2.tex}
%\input{in_progress/hft_introduction.tex}
%\input{in_progress/avoiding_correlation_3.tex}
%\input{in_progress/adaptive_models_2.tex}
%\input{in_progress/how_to_train_a_neural_network.tex}
%\input{in_progress/how_to_verify_a_neural_network.tex}
%\input{in_progress/choosing_the_right_verifier.tex}
%\input{in_progress/processor_type_and_ecosystem.tex}
%\input{in_progress/the_economics_of_training_a_neural_network.tex}
%\input{in_progress/a_use_case_example.tex}
%\input{in_progress/godels_revenge.tex}
%\input{in_progress/conclusion}
%\input{scratch/0_the_real_ml_pipeline.tex}
%\input{scratch/1_you_probably_dont_believe_how_bad_it_gets.tex}
%\input{scratch/2_modularity.tex}

\end{document}
